{"version":3,"file":"hilux-ngx-motion.mjs","sources":["../../../projects/ngx-motion/src/lib/services/motion-browser-safe.ts","../../../projects/ngx-motion/src/lib/services/motion-one.service.ts","../../../projects/ngx-motion/src/lib/services/motion-animation.service.ts","../../../projects/ngx-motion/src/lib/directives/motion-one.directive.ts","../../../projects/ngx-motion/src/lib/directives/motion-if.directive.ts","../../../projects/ngx-motion/src/public-api.ts","../../../projects/ngx-motion/src/hilux-ngx-motion.ts"],"sourcesContent":["/**\n * Browser-safe wrapper for Motion One\n * Prevents \"window is not defined\" errors during SSR\n */\n\n// Create mock implementations for server environment\nconst mockAnimate = () => ({ stop: () => {} });\nconst mockEasing = { ease: [0, 0, 1, 1] };\nconst mockStagger = () => 0;\nconst mockInView = () => ({ stop: () => {} });\n\n// Check if we're in a browser environment\nconst isBrowser = typeof window !== 'undefined';\n\n// Define the exports\nlet motionExports: any = {\n  animate: mockAnimate,\n  easeIn: mockEasing,\n  easeOut: mockEasing,\n  easeInOut: mockEasing,\n  stagger: mockStagger,\n  inView: mockInView\n};\n\n// Only try to load motion in browser environment\nif (isBrowser) {\n  try {\n    // Use dynamic import syntax\n    import('motion').then(motion => {\n      motionExports.animate = motion.animate;\n      motionExports.easeIn = motion.easeIn;\n      motionExports.easeOut = motion.easeOut;\n      motionExports.easeInOut = motion.easeInOut;\n      motionExports.stagger = motion.stagger;\n      motionExports.inView = motion.inView;\n    }).catch(e => {\n      console.warn('Failed to import motion library, using mock implementations', e);\n    });\n  } catch (e) {\n    console.warn('Failed to import motion library, using mock implementations', e);\n  }\n}\n\n// Export the implementations (real or mock)\nexport const animate = (...args: any[]) => {\n  return motionExports.animate(...args);\n};\n\nexport const easeIn = motionExports.easeIn;\nexport const easeOut = motionExports.easeOut;\nexport const easeInOut = motionExports.easeInOut;\nexport const stagger = (...args: any[]) => {\n  return motionExports.stagger(...args);\n};\n\nexport const inView = (...args: any[]) => {\n  return motionExports.inView(...args);\n};\n\n// Re-export types\nexport type {\n  AnimationOptions,\n  Target\n} from 'motion';","import {\n    Injectable,\n    Inject,\n    signal,\n    PLATFORM_ID\n  } from '@angular/core';\n  import { DOCUMENT, isPlatformBrowser } from '@angular/common';\n  import { fromEvent, Subscription, Subject, Observable, timer } from 'rxjs';\n  import { throttleTime, debounceTime, take, map } from 'rxjs/operators';\n  import { Router } from '@angular/router';\n  \n  // Define the interface for motion elements\n  export interface MotionElement {\n    elementId: string;\n    getDuration(): number;\n    runInitAnimation(): void;\n    runExitAnimation(): void;\n    cancel(): void;\n    route?: string;\n  }\n  \n  @Injectable({\n    providedIn: 'root',\n  })\n  export class MotionOneService {\n    private scrollSubscription: Subscription;\n    private motionElements: MotionElement[] = [];\n    scrollYProgress = signal(0);\n    totalExitDuration: number = 0;\n    \n    // Subject that emits when all exit animations for a route are complete\n    private exitAnimationsComplete = new Subject<string>();\n    \n    // Subject that emits when all enter animations for a route are complete\n    private enterAnimationsComplete = new Subject<string>();\n    \n    // Track active exit animations by route\n    private activeExitAnimations: Map<string, number> = new Map();\n    \n    // Track active enter animations by route\n    private activeEnterAnimations: Map<string, number> = new Map();\n  \n    constructor(\n      private router: Router,\n      @Inject(DOCUMENT) private document: Document,\n      @Inject(PLATFORM_ID) private platformId: Object\n    ) {\n      this.setupScrollListener();\n      this.scrollSubscription = new Subscription();\n    }\n  \n    ngOnDestroy() {\n      if (this.scrollSubscription) {\n        this.scrollSubscription.unsubscribe();\n      }\n      this.exitAnimationsComplete.complete();\n      this.enterAnimationsComplete.complete();\n    }\n  \n    private updateTotalExitDuration() {\n      if (!isPlatformBrowser(this.platformId)) return;\n      \n      this.totalExitDuration = this.motionElements.reduce((total, element) => {\n        return total + element.getDuration();\n      }, 0);\n    }\n  \n    private setupScrollListener() {\n      if (!isPlatformBrowser(this.platformId)) return;\n      \n      this.scrollSubscription = fromEvent(window, 'scroll')\n        .pipe(\n          throttleTime(16), // Limit to about 60fps\n          debounceTime(1), // Wait for scroll to settle\n        )\n        .subscribe(() => {\n          this.updateScrollProgress();\n        });\n      this.updateScrollProgress();\n    }\n  \n    private updateScrollProgress() {\n      if (!isPlatformBrowser(this.platformId)) return;\n      \n      const doc = this.document.documentElement;\n      const scrollTop = window.scrollY || doc.scrollTop;\n      const scrollHeight = doc.scrollHeight - doc.clientHeight;\n      const progress =\n        scrollHeight > 0 ? Math.round((scrollTop / scrollHeight) * 100) : 0;\n      this.scrollYProgress.set(progress);\n    }\n  \n    registerMotionElement(element: MotionElement) {\n      this.motionElements.push(element);\n      this.updateTotalExitDuration();\n    }\n  \n    unregisterMotionElement(element: MotionElement) {\n      this.motionElements = this.motionElements.filter((e) => e !== element);\n      this.updateTotalExitDuration();\n    }\n  \n    getMotionElements(): MotionElement[] {\n      return this.motionElements;\n    }\n  \n    getAllElementsByRoute(route: string): MotionElement[] {\n      const elements = this.motionElements.filter(element => element.route === route);\n      //console.log(`[MotionOneService] Found ${elements.length} elements for route ${route} (out of ${this.motionElements.length} total)`);\n      \n\n      \n      return elements;\n    }\n  \n    cancelAllAnimations() {\n      if (!isPlatformBrowser(this.platformId)) return;\n      \n      this.motionElements.forEach((motion) => {\n        motion.cancel();\n      });\n    }\n  \n    runAllEnterAnimations(): void {\n      if (!isPlatformBrowser(this.platformId)) return;\n      \n      this.motionElements.forEach((motion) => {\n        motion.runInitAnimation();\n      });\n    } \n  \n    runAllExitAnimations(): void {\n      if (!isPlatformBrowser(this.platformId)) return;\n      \n      this.motionElements.forEach((motion) => {\n        console.log(motion)\n        motion.runExitAnimation();\n      });\n    }\n  \n    /**\n     * Get an observable that emits true when all exit animations for a route are complete\n     * @param route The route to check for animation completion\n     * @returns Observable that emits true when animations are complete\n     */\n    getExitAnimationsComplete(route: string): Observable<boolean> {\n      if (!isPlatformBrowser(this.platformId)) {\n        // If not in browser, immediately emit true\n        return timer(0).pipe(\n          take(1),\n          map(() => true)\n        );\n      }\n      \n      // Get the exit duration for the route\n      const exitDuration = this.getLongestExitDurationForRoute(route);\n     // console.log(`[MotionOneService] Setting up exit animations complete for route ${route} with duration ${exitDuration}s`);\n      \n      // If no animations or duration is 0, immediately emit true\n      if (exitDuration === 0 || this.getAllElementsByRoute(route).length === 0) {\n      //  console.log(`[MotionOneService] No exit animations for route ${route}, emitting complete immediately`);\n        return timer(0).pipe(\n          take(1),\n          map(() => true)\n        );\n      }\n      \n      // Otherwise, wait for the exit duration and then emit true\n      return timer(exitDuration * 1000).pipe(\n        take(1),\n        map(() => true)\n      );\n    }\n    \n    /**\n     * Get an observable that emits true when all enter animations for a route are complete\n     * @param route The route to check for animation completion\n     * @returns Observable that emits true when animations are complete\n     */\n    getEnterAnimationsComplete(route: string): Observable<boolean> {\n      if (!isPlatformBrowser(this.platformId)) {\n        // If not in browser, immediately emit true\n        return timer(0).pipe(\n          take(1),\n          map(() => true)\n        );\n      }\n      \n      // Get the enter duration for the route\n      const enterDuration = this.getLongestEnterDurationForRoute(route);\n     // console.log(`[MotionOneService] Setting up enter animations complete for route ${route} with duration ${enterDuration}s`);\n      \n      // If no animations or duration is 0, immediately emit true\n      if (enterDuration === 0 || this.getAllElementsByRoute(route).length === 0) {\n     //   console.log(`[MotionOneService] No enter animations for route ${route}, emitting complete immediately`);\n        return timer(0).pipe(\n          take(1),\n          map(() => true)\n        );\n      }\n      \n      // Otherwise, wait for the enter duration and then emit true\n      return timer(enterDuration * 1000).pipe(\n        take(1),\n        map(() => true)\n      );\n    }\n    \n    /**\n     * Start tracking exit animations for a route\n     * @param route The route to track\n     */\n    startExitAnimationsForRoute(route: string): void {\n      if (!isPlatformBrowser(this.platformId)) return;\n      \n      const elements = this.getAllElementsByRoute(route);\n      this.activeExitAnimations.set(route, elements.length);\n      \n      //console.log(`[MotionOneService] Starting exit animations for route ${route} with ${elements.length} elements`);\n      \n      // If no elements, immediately mark as complete\n      if (elements.length === 0) {\n        this.completeExitAnimationsForRoute(route);\n        return;\n      }\n      \n      // Run exit animations for all elements in this route\n      elements.forEach(element => {\n        element.runExitAnimation();\n      });\n      \n      // Get the longest duration and set a timer to mark animations as complete\n      const exitDuration = this.getLongestExitDurationForRoute(route);\n      setTimeout(() => {\n        this.completeExitAnimationsForRoute(route);\n      }, exitDuration * 1000);\n    }\n    \n    /**\n     * Start tracking enter animations for a route\n     * @param route The route to track\n     */\n    startEnterAnimationsForRoute(route: string): void {\n      if (!isPlatformBrowser(this.platformId)) return;\n      \n      const elements = this.getAllElementsByRoute(route);\n      this.activeEnterAnimations.set(route, elements.length);\n      \n     // console.log(`[MotionOneService] Starting enter animations for route ${route} with ${elements.length} elements`);\n      \n      // If no elements, immediately mark as complete\n      if (elements.length === 0) {\n        this.completeEnterAnimationsForRoute(route);\n        return;\n      }\n      \n      // Run enter animations for all elements in this route\n      elements.forEach(element => {\n        element.runInitAnimation();\n      });\n      \n      // Get the longest duration and set a timer to mark animations as complete\n      const enterDuration = this.getLongestEnterDurationForRoute(route);\n      setTimeout(() => {\n        this.completeEnterAnimationsForRoute(route);\n      }, enterDuration * 1000);\n    }\n    \n    /**\n     * Mark exit animations for a route as complete\n     * @param route The route to mark as complete\n     */\n    private completeExitAnimationsForRoute(route: string): void {\n      console.log(`[MotionOneService] Exit animations complete for route ${route}`);\n      this.activeExitAnimations.delete(route);\n      this.exitAnimationsComplete.next(route);\n    }\n    \n    /**\n     * Mark enter animations for a route as complete\n     * @param route The route to mark as complete\n     */\n    private completeEnterAnimationsForRoute(route: string): void {\n      console.log(`[MotionOneService] Enter animations complete for route ${route}`);\n      this.activeEnterAnimations.delete(route);\n      this.enterAnimationsComplete.next(route);\n    }\n    \n    /**\n     * Check if exit animations for a route are complete\n     * @param route The route to check\n     * @returns True if animations are complete or not running\n     */\n    areExitAnimationsComplete(route: string): boolean {\n      return !this.activeExitAnimations.has(route);\n    }\n    \n    /**\n     * Check if enter animations for a route are complete\n     * @param route The route to check\n     * @returns True if animations are complete or not running\n     */\n    areEnterAnimationsComplete(route: string): boolean {\n      return !this.activeEnterAnimations.has(route);\n    }\n  \n    runAllExitAnimationsForRoute(route: string): MotionElement[] {\n      if (!isPlatformBrowser(this.platformId)) return [];\n      \n      // Start tracking animations for this route\n      this.startExitAnimationsForRoute(route);\n      \n      return this.getAllElementsByRoute(route);\n    }\n    \n    runAllEnterAnimationsForRoute(route: string): MotionElement[] {\n      if (!isPlatformBrowser(this.platformId)) return [];\n      \n      // Start tracking animations for this route\n      this.startEnterAnimationsForRoute(route);\n      \n      return this.getAllElementsByRoute(route);\n    }\n    \n    getLongestExitDurationForRoute(route: string): number {\n      if (!isPlatformBrowser(this.platformId)) return 0;\n      \n     // console.log(`[MotionOneService] Getting longest exit duration for route ${route}`);\n      \n      if (this.motionElements.length === 0) {\n      //  console.log('[MotionOneService] No motion elements registered');\n        return 0;\n      }\n      \n      const elements = this.getAllElementsByRoute(route);\n      if (elements.length === 0) {\n      //  console.log(`[MotionOneService] No elements found for route ${route}`);\n        return 0;\n      }\n      \n      const durations = elements.map((motion) => {\n        const duration = motion.getDuration();\n     //   console.log(`[MotionOneService] Element ${motion.elementId} has exit duration: ${duration}s`);\n        return duration;\n      });\n      \n      const maxDuration = durations.length > 0 ? Math.max(...durations) : 0;\n     console.log(`[MotionOneService] Longest exit duration for route ${route}: ${maxDuration}s`);\n      return maxDuration;\n    }\n    \n    getLongestEnterDurationForRoute(route: string): number {\n      if (!isPlatformBrowser(this.platformId)) return 0;\n      \n    //  console.log(`[MotionOneService] Getting longest enter duration for route ${route}`);\n      \n      if (this.motionElements.length === 0) {\n    //    console.log('[MotionOneService] No motion elements registered');\n        return 0;\n      }\n      \n      const elements = this.getAllElementsByRoute(route);\n      if (elements.length === 0) {\n    //    console.log(`[MotionOneService] No elements found for route ${route}`);\n        return 0;\n      }\n      \n      const durations = elements.map((motion) => {\n        const duration = motion.getDuration();\n    //    console.log(`[MotionOneService] Element ${motion.elementId} has enter duration: ${duration}s`);\n        return duration;\n      });\n      \n      const maxDuration = durations.length > 0 ? Math.max(...durations) : 0;\n      console.log(`[MotionOneService] Longest enter duration for route ${route}: ${maxDuration}s`);\n      return maxDuration;\n    }\n  \n    getLongestEnterDuration(): number {\n      if (!isPlatformBrowser(this.platformId)) return 0;\n      \n    //  console.log(`[MotionOneService] Getting longest enter duration from ${this.motionElements.length} elements`);\n      \n      if (this.motionElements.length === 0) {\n     //   console.log('[MotionOneService] No motion elements registered');\n        return 0;\n      }\n      \n      const durations = this.motionElements.map((motion) => {\n        const duration = motion.getDuration();\n     //   console.log(`[MotionOneService] Element ${motion.elementId} has duration: ${duration}s`);\n        return duration;\n      });\n      \n      const maxDuration = durations.length > 0 ? Math.max(...durations) : 0;\n      console.log(`[MotionOneService] Longest enter duration: ${maxDuration}s`);\n      return maxDuration;\n    }\n  }\n  ","import { Injectable, Inject, PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport * as motion from 'motion';\nimport type { AnimationOptions, Target, ValueAnimationOptions, SpringOptions } from 'motion';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MotionAnimationService {\n  constructor(@Inject(PLATFORM_ID) private platformId: Object) {}\n\n  // Mock implementations for server environment\n  private mockAnimate = () => ({ stop: () => {} });\n  private mockEasing = (t: number) => t;\n  private mockStagger = () => 0;\n  private mockSpring = () => motion.easeInOut;\n\n  // Wrapper for animate function\n  animate(target: any, keyframes: any, options?: any): any {\n    if (!isPlatformBrowser(this.platformId)) {\n      return this.mockAnimate();\n    }\n    \n    try {\n      return motion.animate(target, keyframes, options);\n    } catch (e) {\n      console.error('Error in animate:', e);\n      return this.mockAnimate();\n    }\n  }\n\n  // Wrapper for easing functions\n  get easeIn() {\n    return isPlatformBrowser(this.platformId) ? (motion as any).easeIn : this.mockEasing;\n  }\n\n  get easeOut() {\n    return isPlatformBrowser(this.platformId) ? (motion as any).easeOut : this.mockEasing;\n  }\n\n  get easeInOut() {\n    return isPlatformBrowser(this.platformId) ? (motion as any).easeInOut : this.mockEasing;\n  }\n\n  // Wrapper for stagger function\n  stagger(duration: number, options?: any): any {\n    if (!isPlatformBrowser(this.platformId)) {\n      return this.mockStagger();\n    }\n    \n    try {\n      return motion.stagger(duration, options);\n    } catch (e) {\n      console.error('Error in stagger:', e);\n      return this.mockStagger();\n    }\n  }\n\n  get spring() {\n    if (!isPlatformBrowser(this.platformId)) {\n      return this.mockSpring;\n    }\n    \n    return (options?: { stiffness?: number; damping?: number }) => {\n      const m: any = motion as any;\n      try {\n        // Prefer Motion One spring factory if available\n        if (typeof m.spring === 'function') {\n          return m.spring({\n            stiffness: options?.stiffness ?? 100,\n            damping: options?.damping ?? 10\n          });\n        }\n        // Motion 10 shim: use m.createGenerator?.spring\n        if (m?.createGenerator?.spring) {\n          return m.createGenerator.spring({\n            stiffness: options?.stiffness ?? 100,\n            damping: options?.damping ?? 10\n          });\n        }\n      } catch {}\n      // Fallback to an ease function if no spring present\n      return (m?.easeInOut as any) ?? ((t: number) => t);\n    };\n  }\n} ","import {\n  Directive,\n  Input,\n  ElementRef,\n  OnDestroy,\n  Output,\n  EventEmitter,\n  OnChanges,\n  SimpleChanges,\n  HostListener,\n  OnInit,\n  PLATFORM_ID,\n  Inject,\n  ContentChildren,\n  QueryList,\n  AfterContentInit\n} from '@angular/core';\nimport { Router } from '@angular/router';\nimport { isPlatformBrowser } from '@angular/common';\nimport { MotionOneService } from '../services/motion-one.service';\nimport { MotionAnimationService } from '../services/motion-animation.service';\nimport type { AnimationOptions, Target } from 'motion';\nimport { animate, easeIn, easeOut, easeInOut, stagger, inView } from '../services/motion-browser-safe';\n\n// Define interface for transition object similar to Framer Motion\nexport interface TransitionOptions {\n  duration?: number;\n  delay?: number;\n  ease?: string | number[] | { type: 'spring'; stiffness?: number; damping?: number };\n  repeat?: number | boolean;\n  repeatType?: 'loop' | 'mirror' | 'reverse' | 'forwards' | 'pingPong';\n  repeatDelay?: number;\n  staggerChildren?: number;\n  staggerDirection?: number;\n  when?: 'beforeChildren' | 'afterChildren' | 'together';\n  delayChildren?: number;\n  times?: number[]; // keyframe times 0..1\n}\n\n// Define interface for variants that can include transition properties\nexport interface VariantWithTransition {\n  [key: string]: any;\n  transition?: TransitionOptions;\n  at?: number; // Add 'at' property to define when variant should be triggered\n}\n\n// Optional timeline support for orchestrated per-property steps\nexport interface TimelineStep {\n  prop: string;\n  keyframes?: any[] | any;\n  to?: any;\n  duration: number;\n  delay?: number;\n  ease?: string | number[] | { type: 'spring'; stiffness?: number; damping?: number };\n  atTime?: number; // absolute start (s) relative to element start\n  times?: number[];\n  repeat?: number | boolean;\n  repeatType?: 'loop' | 'mirror' | 'reverse' | 'forwards' | 'pingPong';\n  repeatDelay?: number;\n}\n\nlet uniqueIdCounter = 0; \n\n@Directive({\n  selector: '[motionone]',\n  standalone: true,\n  exportAs: 'motionone'\n})\n\nexport class MotionOneDirective implements OnInit, OnDestroy, OnChanges, AfterContentInit {\n  @Input() initial: VariantWithTransition | string = {};\n  @Input() animate: VariantWithTransition | string = {};\n  @Input() exit: VariantWithTransition | string = {};\n  @Input() inView: VariantWithTransition = {};\n  @Input() duration = 0.3; // Changed to number for Motion One\n  @Input() delay = 0; // Changed to number for Motion One\n  @Input() delayChildren = 0; // Add new input for delaying children\n  @Input() repeat = false;\n  @Input() exitDelay = 0; // Changed to number for Motion One\n  @Input() easing: string | number[] | { type: 'spring'; stiffness?: number; damping?: number } = 'ease';\n  @Input() offset = '0px';\n  @Input() whileHover: VariantWithTransition = {};\n  @Input() staggerChildren = 1; // Changed to number for Motion One\n  @Input() staggerDirection = 1; // Changed to number for Motion One\n  @Input() whileTap: VariantWithTransition = {};\n  @Input() whileFocus: VariantWithTransition = {};\n  @Input() whileInView: VariantWithTransition = {};\n  @Input() runInView?: 'never' | 'once' | 'always'; // Controls if animation waits for inView ('never'/undefined = immediate, 'once' = single trigger, 'always' = repeats on scroll)\n  @Input() variants: { [key: string]: VariantWithTransition } = {};\n  @Input() transition: TransitionOptions | Record<string, TransitionOptions> = {};\n  @Input() timeline: TimelineStep[] | undefined;\n  @Output() animationComplete = new EventEmitter<void>();\n\n\n  // Add a public method to restart animations\n  public restartAnimation() {\n\n    // Stop any current animations\n    if (this.controls) {\n      this.controls.stop();\n    }\n\n    // Force reset to initial state immediately without animation\n    const initialVariant = this.getVariant(this.initial);\n    const initialStyles = this.extractStyleProperties(initialVariant);\n\n    // Apply initial styles directly with no transition\n    const element = this.el.nativeElement;\n    element.style.transition = 'none';\n    Object.assign(element.style, initialStyles);\n\n    // Force a reflow to ensure the reset is applied\n    element.offsetHeight;\n\n    // Remove the transition override and start the animation fresh\n    setTimeout(() => {\n      element.style.transition = '';\n\n      // Check if this element uses runInView\n      if (this.isRunInViewEnabled) {\n        // For runInView elements, just reset to initial and let inView handle the animation\n        // Element is already reset to initial, inView will trigger when appropriate\n      } else {\n        // For non-runInView elements, play the animation directly\n        this.playAnimation(this.initial, this.animate);\n      }\n    }, 10);\n  }\n\n  // Query for child motionone directives\n  @ContentChildren(MotionOneDirective, { descendants: true }) childMotionDirectives!: QueryList<MotionOneDirective>;\n  \n  private controls: ReturnType<typeof animate> | null = null;\n  private childrenControls: ReturnType<typeof animate>[] = [];\n  public elementId: string;\n  private hoverTimeout: any;\n  private observer?: IntersectionObserver;\n  private routeDelay: number = 0;\n  private inViewInstance: any;\n  private isChild = false;\n  private parentDirective: MotionOneDirective | null = null;\n  private initialAnimationPlayed = false;\n  private _skipStartStylesApplication = false;\n  private staggerDelay: number | undefined = undefined;\n  private childrenCount = 0;\n  private childIndex = 0;\n  private isStaggeredChild = false; // Flag to indicate if this child is part of a stagger group\n\n  get scrollProgress() {\n    return this.motionService.scrollYProgress();\n  }\n\n  // Helper methods for runInView configuration\n  private get isRunInViewEnabled(): boolean {\n    return this.runInView === 'once' || this.runInView === 'always';\n  }\n\n  private get runInViewRepeat(): 'once' | 'always' {\n    return this.runInView === 'always' ? 'always' : 'once'; // Default to 'once' if undefined or 'never'\n  }\n\n  constructor(\n    public el: ElementRef,\n    private motionService: MotionOneService,\n    private motionAnimation: MotionAnimationService,\n    private router: Router,\n    @Inject(PLATFORM_ID) private platformId: Object\n  ) {\n    this.elementId = `motion-${uniqueIdCounter++}`;\n    \n    // Only run browser-specific code in browser environment\n    if (isPlatformBrowser(this.platformId)) {\n      this.el.nativeElement.setAttribute('id', this.elementId);\n      // Store a reference to this directive on the element for easier access\n      (this.el.nativeElement as any)._motionDirective = this;\n      this.motionService.registerMotionElement(this);\n      this.applyInitialStyles();\n      this.routeDelay = this.motionService.getLongestExitDurationForRoute(this.router.url);\n    }\n  }\n\n  ngOnInit() {\n    this.applyInitialStyles(); // Ensure initial styles are applied\n\n    // Only run animations in browser environment\n    if (isPlatformBrowser(this.platformId)) {\n      // Check if this is a child of another motionone directive\n      let parent = this.el.nativeElement.parentElement;\n      while (parent) {\n        if (parent.hasAttribute('motionone')) {\n          this.isChild = true;\n          break;\n        }\n        parent = parent.parentElement;\n      }\n\n\n      // Set up runInView logic based on parent-child relationship\n      if (this.isRunInViewEnabled) {\n        if (!this.isChild) {\n          // Host elements (non-child) with runInView set up their own observer immediately\n          this.setupInViewAnimation();\n        } else {\n          // Child elements with runInView only set up observer if parent doesn't have stagger\n          // We'll check this later in ngAfterContentInit when we know about parent stagger settings\n        }\n      } else if (!this.isChild) {\n        // Only auto-play animation if not a child AND no runInView\n        this.playAnimation(this.initial, this.animate);\n      }\n\n      // Setup inView/whileInView animations - these work independently of runInView\n      // Only set up if this element is not managed by a parent with runInView\n      if (!this.isStaggeredChild &&\n          ((this.inView && Object.keys(this.inView).length > 0) ||\n           (this.whileInView && Object.keys(this.whileInView).length > 0))) {\n        this.setupInViewAnimation();\n      }\n    }\n  }\n\n  ngAfterContentInit() {\n    // Register child directives if we have staggerChildren\n    if (this.childMotionDirectives && this.childMotionDirectives.length > 0) {\n\n      // Set this directive as the parent for all children\n      setTimeout(() => {\n        // Filter out self from children\n        const childDirectives = this.childMotionDirectives.filter(child => child !== this);\n        this.childrenCount = childDirectives.length;\n\n\n        // Set parent and index for each child\n        childDirectives.forEach((child, index) => {\n          child.setParent(this, index, this.childrenCount);\n        });\n\n        // Check if we need to stagger children\n        const staggerValue = this.getStaggerValue();\n\n        // Handle child runInView setup based on parent runInView and stagger\n        if (this.runInView === 'always') {\n\n          // Mark ALL children as managed by parent (regardless of stagger)\n          childDirectives.forEach(child => {\n            if (child.isRunInViewEnabled) {\n              child.isStaggeredChild = true; // Mark so child knows parent manages it\n              // DO NOT set up intersection observer - parent handles everything\n            }\n          });\n\n          // CRITICAL: Set up intersection observer for the parent\n          this.setupRunInViewObserver();\n\n          // Check if we have stagger\n          if (staggerValue > 0 && this.childrenCount > 0) {\n          } else {\n          }\n        } else if (staggerValue > 0 && this.childrenCount > 0) {\n\n          // For staggered children, mark them as staggered but DON'T set up intersection observers\n          childDirectives.forEach(child => {\n            if (child.isRunInViewEnabled) {\n              child.isStaggeredChild = true;\n            }\n          });\n\n          // Trigger staggered animations for children (only if parent not using runInView)\n          if (!this.isRunInViewEnabled) {\n            this.applyStaggerToChildren();\n          } else {\n          }\n        } else {\n\n          // If no stagger and parent doesn't have runInView=\"always\", children can set up their own observers\n          childDirectives.forEach(child => {\n            if (child.isRunInViewEnabled) {\n              child.setupInViewAnimation();\n            }\n          });\n        }\n      });\n    } else {\n    }\n  }\n\n  setParent(parent: MotionOneDirective, index: number, totalChildren: number) {\n    this.parentDirective = parent;\n    this.isChild = true;\n    this.childIndex = index;\n    this.childrenCount = totalChildren;\n  }\n\n  // COMPLETE RESET METHOD: Reset parent and all children to initial state (like Framer Motion)\n  public completeResetToInitial() {\n\n    // 1. Reset self to initial\n    this.forceResetToInitial();\n\n    // 2. Reset all children to their individual initial states\n    if (this.childMotionDirectives && this.childMotionDirectives.length > 0) {\n      const childDirectives = this.childMotionDirectives.filter(child => child !== this);\n\n      childDirectives.forEach((child, index) => {\n        child.forceResetToInitial();\n      });\n\n    }\n  }\n\n  // FORCE RESET: Reset this element to its initial state immediately\n  public forceResetToInitial() {\n\n    // Stop any current animation immediately\n    if (this.controls) {\n      this.controls.stop();\n      this.controls = null;\n    }\n\n    // Get this element's initial state\n    const initialVariant = this.getVariant(this.initial);\n    const initialStyles = this.extractStyleProperties(initialVariant);\n\n\n    // Apply initial styles immediately with no transition\n    this.el.nativeElement.style.transition = 'none';\n\n    // Clear any existing styles first\n    this.el.nativeElement.style.opacity = '';\n    this.el.nativeElement.style.transform = '';\n\n    // Apply initial styles\n    Object.assign(this.el.nativeElement.style, initialStyles);\n    this.el.nativeElement.offsetHeight; // Force reflow\n    this.el.nativeElement.style.transition = '';\n\n    // Reset animation flags\n    this.initialAnimationPlayed = false;\n\n  }\n\n  // Simple method to reset child to initial if parent has runInView\n  public resetToInitialIfParentHasRunInView() {\n    this.forceResetToInitial();\n  }\n\n  // Method to call complete reset when parent exits viewport\n  public parentExitViewportReset() {\n    this.completeResetToInitial();\n  }\n\n  // Set up intersection observer for runInView functionality\n  private setupRunInViewObserver() {\n\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n\n    // Create intersection observer with proper threshold\n    this.observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n\n          if (entry.isIntersecting) {\n            this.handleViewportEntry();\n          } else {\n            this.handleViewportExit();\n          }\n        });\n      },\n      {\n        root: null, // Use viewport as root\n        rootMargin: '0px',\n        threshold: 0.1 // Trigger when 10% of element is visible\n      }\n    );\n\n    // Start observing the element\n    this.observer.observe(this.el.nativeElement);\n  }\n\n  // Handle when element enters viewport\n  private handleViewportEntry() {\n\n    // Check if we have stagger children\n    const staggerValue = this.getStaggerValue();\n    if (staggerValue > 0 && this.childMotionDirectives?.length > 0) {\n      this.applyStaggerToChildren();\n    } else {\n      this.playAnimation(this.initial, this.animate);\n    }\n  }\n\n  // Handle when element exits viewport\n  private handleViewportExit() {\n    if (this.runInView === 'always') {\n\n      // Force children to their initial variant state\n      if (this.childMotionDirectives && this.childMotionDirectives.length > 0) {\n        const childDirectives = this.childMotionDirectives.filter(child => child !== this);\n        childDirectives.forEach((child) => {\n\n          // Stop any animation and immediately set to initial variant\n          if (child.controls) {\n            child.controls.stop();\n            child.controls = null;\n          }\n\n          // Use playAnimation to go to initial variant (instant)\n          child.playAnimation(child.animate, child.initial);\n          child.initialAnimationPlayed = false;\n        });\n      }\n    }\n  }\n\n  // Method to stagger children animations\n  applyStaggerToChildren() {\n\n    // Get stagger configuration\n    const staggerValue = this.getStaggerValue();\n    const staggerDirection = this.getStaggerDirection();\n    const delayChildren = this.delayChildren; // number\n    const parentDelay = (((this.transition as TransitionOptions)?.delay) ?? 0) as number;\n\n\n    // Get all child directives (excluding self)\n    const childDirectives = this.childMotionDirectives.filter(child => child !== this);\n\n    // Determine when to animate parent relative to children\n    const when = this.getWhen();\n\n    // Animate parent if needed\n    if (when !== 'afterChildren') {\n      this.runSelfAnimation();\n    }\n\n    // Animate each child with appropriate stagger delay\n    childDirectives.forEach((childDirective, index) => {\n      // Calculate the stagger delay based on index and direction\n      let staggerIndex;\n      if (staggerDirection >= 0) {\n        staggerIndex = index;\n      } else {\n        staggerIndex = this.childrenCount - 1 - index;\n      }\n\n      // Combine parent delay, delayChildren, and stagger delay\n      const totalDelay = (parentDelay as number) + delayChildren + (staggerIndex * staggerValue);\n\n\n      // CRITICAL: Override child's transition delay to prevent conflicts\n      // Clear any user-defined delays that would interfere with stagger timing\n      if (childDirective.transition && typeof childDirective.transition === 'object') {\n        const childTransition = childDirective.transition as any;\n        if (childTransition.delay !== undefined) {\n          // Temporarily clear the child's delay\n          childTransition.delay = undefined;\n        }\n      }\n\n      // Force override the child's delay with calculated stagger delay\n      childDirective.overrideDelay(totalDelay);\n\n      // CRITICAL: Use child's own variants directly (parent has no initial/animate)\n      setTimeout(() => {\n        childDirective.playAnimation(childDirective.initial, childDirective.animate);\n      }, totalDelay * 1000);\n    });\n\n    // Animate parent after children if specified\n    if (when === 'afterChildren') {\n      const totalChildrenDuration = (parentDelay as number) + delayChildren + (this.childrenCount * staggerValue);\n      this.overrideDelay(totalChildrenDuration);\n      this.runSelfAnimation();\n    }\n\n  }\n\n  // Method to override the delay for this directive\n  overrideDelay(delay: number) {\n    this.staggerDelay = delay;\n  }\n\n  // Run animation only for this element (not children)\n  runSelfAnimation() {\n    // Get animation options\n    const options = this.getAnimationOptions();\n\n\n    // Extract only style properties for animation\n    const targetStyles = this.extractStyleProperties(this.getVariant(this.animate));\n    const startStyles = this.extractStyleProperties(this.getVariant(this.initial));\n\n\n    // Add DOM style logging before applying start styles\n    const beforeStartComputedStyles = window.getComputedStyle(this.el.nativeElement);\n\n    // Only apply start state immediately if not part of stagger coordination\n    // For stagger children, the parent coordination handles initial state setup\n    if (!this.isStaggeredChild) {\n      Object.assign(this.el.nativeElement.style, startStyles);\n    } else {\n    }\n\n    // Add logging after applying start styles\n    const afterStartComputedStyles = window.getComputedStyle(this.el.nativeElement);\n\n    // Create animation\n    this.controls = this.motionAnimation.animate(\n      this.el.nativeElement as Target,\n      targetStyles,\n      options\n    );\n\n    this.initialAnimationPlayed = true;\n  }\n\n  ngOnDestroy() {\n\n    \n    if (this.exit && Object.keys(this.exit).length > 0) {\n      this.runExitAnimation();\n    }\n\n    if (this.inViewInstance) {\n      this.inViewInstance.stop();\n    }\n\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n    \n    // Clean up any ongoing animations\n    if (this.controls) {\n      this.controls.stop();\n    }\n    \n    // Clean up any children animations\n    this.childrenControls.forEach(control => {\n      if (control) control.stop();\n    });\n\n\n   // this.motionService.unregisterMotionElement(this);\n    //console.log(`[${this.elementId}] Unregistered motionone directive`);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['animate'] && changes['animate'].previousValue !== undefined) {\n      const oldState = changes['animate'].previousValue;\n      let newState = changes['animate'].currentValue;\n      \n      if (typeof newState === 'object') {\n        this.playAnimation(oldState, newState);\n      } else if (typeof newState === 'string' && this.variants?.[newState]) {\n        newState = this.variants[newState];\n        this.playAnimation(oldState, newState);\n      } \n    }\n\n    // Handle transition changes\n    if (changes['transition'] && !changes['transition'].firstChange) {\n      // Re-apply animation with new transition settings\n      this.playAnimation(this.initial, this.animate);\n    }\n  }\n\n  @HostListener('mouseenter')\n  onMouseEnter() {\n    if (Object.keys(this.whileHover).length > 0) {\n      clearTimeout(this.hoverTimeout);\n      if (Object.keys(this.animate).length > 0) {\n        this.playAnimation(this.animate, this.whileHover);\n      } else {\n        this.playAnimation(this.initial, this.whileHover);\n      }\n    }\n  }\n\n  @HostListener('mouseleave')\n  onMouseLeave() {\n    if (Object.keys(this.whileHover).length > 0) {\n      this.hoverTimeout = setTimeout(() => {\n        if (Object.keys(this.animate).length > 0) {\n          this.playAnimation(this.whileHover, this.animate);\n        } else {\n          this.playAnimation(this.whileHover, this.initial);\n        }\n      }, 100);\n    }\n  }\n\n  @HostListener('mousedown', ['$event'])\n  @HostListener('touchstart', ['$event'])\n  onPress(event: Event) {\n    if (Object.keys(this.whileTap).length > 0) {\n      if (Object.keys(this.animate).length > 0) {\n        this.playAnimation(this.animate, this.whileTap);\n      } else {\n        this.playAnimation(this.initial, this.whileTap);\n      }\n      \n      // Only add event listeners in browser environment\n      if (isPlatformBrowser(this.platformId)) {\n        const endEvent = event.type === 'mousedown' ? 'mouseup' : 'touchend';\n        const endListener = () => {\n          if (Object.keys(this.animate).length > 0) {\n            this.playAnimation(this.whileTap, this.animate);\n          } else {\n            this.playAnimation(this.whileTap, this.initial);\n          }\n\n          window.removeEventListener(endEvent, endListener);\n        };\n\n        window.addEventListener(endEvent, endListener);\n      }\n    }\n  }\n\n  @HostListener('focus')\n  onFocus() {\n    if (Object.keys(this.whileFocus).length > 0) {\n      if (Object.keys(this.animate).length > 0) {\n        this.playAnimation(this.animate, this.whileFocus);\n      } else {\n        this.playAnimation(this.initial, this.whileFocus);\n      }\n    }\n  }\n\n  @HostListener('blur')\n  onBlur() {\n    if (Object.keys(this.whileFocus).length > 0) {\n      if (Object.keys(this.animate).length > 0) {\n        this.playAnimation(this.whileFocus, this.animate);\n      } else {\n        this.playAnimation(this.whileFocus, this.initial);\n      }\n    }\n  }\n\n  applyInitialValues() {\n    // Extract only style properties (exclude transition)\n    const styles = this.extractStyleProperties(this.getVariant(this.initial));\n    Object.assign(this.el.nativeElement.style, styles);\n  }\n\n  private applyInitialStyles() {\n    // Extract only style properties (exclude transition)\n    const styles = this.extractStyleProperties(this.getVariant(this.initial));\n\n    // Apply initial styles immediately to prevent flash\n    if (styles && Object.keys(styles).length > 0) {\n      // For runInView elements, ensure initial styles are applied without any transition\n      if (this.isRunInViewEnabled) {\n        this.el.nativeElement.style.transition = 'none';\n        Object.assign(this.el.nativeElement.style, styles);\n        this.el.nativeElement.offsetHeight; // Force reflow\n        this.el.nativeElement.style.transition = '';\n      } else {\n        Object.assign(this.el.nativeElement.style, styles);\n      }\n    }\n  }\n\n  private applyAnimateStyles() {\n    // Extract only style properties (exclude transition)\n    const styles = this.extractStyleProperties(this.getVariant(this.animate));\n    Object.assign(this.el.nativeElement.style, styles);\n  }\n\n  // Helper to extract only style properties from a variant (excluding transition)\n  public extractStyleProperties(variant: VariantWithTransition): Record<string, any> {\n    if (!variant) return {};\n    \n    const result: Record<string, any> = {};\n    \n    for (const key in variant) {\n      // skip meta keys\n      if (key === 'transition' || key === 'at') continue;\n      // Allow raw transform strings or keyframe arrays to pass through untouched\n      if (key === 'transform') {\n        (result as any)['transform'] = (variant as any)[key];\n        continue;\n      }\n      if (this.isTransformProperty(key)) {\n        this.applyTransformProperty(result, key, variant[key]);\n      } else {\n        this.applyStyleProperty(result, key, variant[key]);\n      }\n    }\n    \n    this.normalizeTransformProperty(result);\n    \n    return result;\n  }\n\n  // Check if a property should be handled as a transform\n  private isTransformProperty(key: string): boolean {\n    return ['x', 'y', 'rotate', 'scale', 'scaleX', 'scaleY'].includes(key);\n  }\n\n  // Apply transform properties to the result object\n  private applyTransformProperty(result: Record<string, any>, key: string, value: any): void {\n    // If keyframe array is provided, let Motion One handle it directly\n    if (Array.isArray(value)) {\n      (result as any)[key] = value;\n      return;\n    }\n    // Initialize transform matrix if it doesn't exist\n    if (!result['transform']) {\n      result['transform'] = 'matrix(1, 0, 0, 1, 0, 0)';\n    }\n\n    // Parse current matrix\n    const currentMatrix = result['transform'].match(/matrix\\((.*)\\)/)[1].split(',').map(Number);\n    \n    // Create new matrix based on the transform type\n    let newMatrix: number[];\n    \n    switch (key) {\n      case 'x':\n        newMatrix = [1, 0, 0, 1, value, 0];\n        break;\n      case 'y':\n        newMatrix = [1, 0, 0, 1, 0, value];\n        break;\n      case 'rotate':\n        const rad = (value * Math.PI) / 180;\n        const cos = Math.cos(rad);\n        const sin = Math.sin(rad);\n        newMatrix = [cos, -sin, sin, cos, 0, 0];\n        break;\n      case 'scale':\n        newMatrix = [value, 0, 0, value, 0, 0];\n        break;\n      case 'scaleX':\n        newMatrix = [value, 0, 0, 1, 0, 0];\n        break;\n      case 'scaleY':\n        newMatrix = [1, 0, 0, value, 0, 0];\n        break;\n      default:\n        return;\n    }\n\n    // Multiply matrices\n    const finalMatrix = this.multiplyMatrices(currentMatrix, newMatrix);\n    \n    // Apply the new matrix\n    result['transform'] = `matrix(${finalMatrix.join(',')})`;\n  }\n\n  // Helper function to multiply two 2D matrices\n  private multiplyMatrices(a: number[], b: number[]): number[] {\n    return [\n      a[0] * b[0] + a[2] * b[1],  // a\n      a[1] * b[0] + a[3] * b[1],  // b\n      a[0] * b[2] + a[2] * b[3],  // c\n      a[1] * b[2] + a[3] * b[3],  // d\n      a[0] * b[4] + a[2] * b[5] + a[4],  // e\n      a[1] * b[4] + a[3] * b[5] + a[5]   // f\n    ];\n  }\n\n  // Apply regular style properties to the result object\n  private applyStyleProperty(result: Record<string, any>, key: string, value: any): void {\n    if (this.isColorProperty(key)) {\n      if (Array.isArray(value)) {\n        result[key] = value.map(v => this.normalizeColor(v));\n      } else {\n        result[key] = this.normalizeColor(value);\n      }\n    } else {\n      result[key] = value;\n    }\n  }\n\n  // Check if a property is a color property\n  private isColorProperty(key: string): boolean {\n    return ['backgroundColor', 'color', 'borderColor'].includes(key);\n  }\n\n  // Normalize the transform property by trimming extra spaces\n  private normalizeTransformProperty(result: Record<string, any>): void {\n    if (result['transform']) {\n      result['transform'] = result['transform'].trim();\n    }\n  }\n\n  private getEasing(easingString: string | number[] | { type: 'spring'; stiffness?: number; damping?: number } | undefined) {\n    if (!easingString) return this.motionAnimation.easeInOut;\n    if (Array.isArray(easingString)) return easingString;\n    if (typeof easingString === 'object' && 'type' in easingString && easingString.type === 'spring') {\n      return this.motionAnimation.spring({\n        stiffness: easingString.stiffness || 100,\n        damping: easingString.damping || 10\n      });\n    }\n    if (typeof easingString === 'string') {\n      if (easingString === 'ease-in') return this.motionAnimation.easeIn;\n      if (easingString === 'ease-out') return this.motionAnimation.easeOut;\n      if (easingString === 'ease-in-out' || easingString === 'ease') return this.motionAnimation.easeInOut;\n      if (easingString === 'spring') return this.motionAnimation.spring();\n    }\n    return this.motionAnimation.easeInOut;\n  }\n\n  private getAnimationOptions(targetState?: VariantWithTransition): AnimationOptions {\n    // Priority: 1. Stagger delay, 2. State-specific transition, 3. Global transition, 4. Individual properties\n    const stateTransition = (targetState?.transition as TransitionOptions) ?? (this.getVariant(this.animate)?.transition as TransitionOptions);\n    const globalTransition = (this.transition as TransitionOptions);\n    \n    const transitionObj: TransitionOptions = stateTransition || globalTransition || {};\n    \n    // Always prioritize stagger delay over any other delay settings (including 0)\n    const delay = this.staggerDelay !== undefined && this.staggerDelay >= 0 ? this.staggerDelay : (transitionObj.delay ?? this.delay);\n\n    \n    const easeInput = transitionObj.ease ?? this.easing;\n    // Detect if target contains keyframe arrays (avoid native spring in that case)\n    let targetHasKeyframeArrays = false;\n    if (targetState) {\n      for (const k of Object.keys(targetState)) {\n        if (k === 'transition' || k === 'at') continue;\n        const v: any = (targetState as any)[k];\n        if (Array.isArray(v)) { targetHasKeyframeArrays = true; break; }\n      }\n    }\n    // If spring config and no keyframe arrays, prefer native spring options (no fixed duration)\n    if (easeInput && typeof easeInput === 'object' && 'type' in (easeInput as any) && (easeInput as any).type === 'spring' && !targetHasKeyframeArrays) {\n      const springOptions: any = {\n        type: 'spring',\n        stiffness: (easeInput as any).stiffness ?? 100,\n        damping: (easeInput as any).damping ?? 10,\n        delay,\n        repeat: this.getRepeatValue(transitionObj),\n        repeatDelay: transitionObj.repeatDelay,\n        onComplete: () => this.animationComplete.emit()\n      };\n      const direction = this.mapRepeatTypeToDirection(transitionObj.repeatType);\n      if (direction) springOptions.direction = direction;\n      if (transitionObj.repeatType) springOptions.repeatType = transitionObj.repeatType;\n      return springOptions as AnimationOptions;\n    }\n    const ease = this.getEasing(easeInput as any);\n\n    const options: any = {\n      duration: transitionObj.duration ?? this.duration,\n      delay,\n      repeat: this.getRepeatValue(transitionObj),\n      repeatDelay: transitionObj.repeatDelay,\n      onComplete: () => this.animationComplete.emit()\n    };\n    const direction = this.mapRepeatTypeToDirection(transitionObj.repeatType);\n    if (direction) options.direction = direction;\n    if (transitionObj.repeatType) options.repeatType = transitionObj.repeatType;\n    options.easing = ease; // Motion 11+\n    (options as any).ease = ease; // Back-compat\n    return options as AnimationOptions;\n  }\n\n  private getRepeatValue(transitionObj: TransitionOptions): number {\n    // Handle repeat value from transition object or fallback to directive input\n    if (transitionObj.repeat !== undefined) {\n      if (transitionObj.repeat === true) {\n        return Infinity;\n      } else if (typeof transitionObj.repeat === 'number') {\n        return transitionObj.repeat;\n      }\n    }\n    \n    return this.repeat ? Infinity : 0;\n  }\n\n  private mapRepeatTypeToDirection(\n    repeatType: TransitionOptions['repeatType'] | undefined\n  ): 'normal' | 'reverse' | 'alternate' | undefined {\n    if (!repeatType) return undefined;\n    // Aliases\n    if (repeatType === 'forwards' || repeatType === 'loop') return 'normal';\n    if (repeatType === 'reverse') return 'reverse';\n    if (repeatType === 'pingPong' || repeatType === 'mirror') return 'alternate';\n    // Default\n    return 'normal';\n  }\n\n  private getStaggerValue(): number {\n    // Priority: 1. State-specific transition, 2. Global transition, 3. Individual properties\n    const stateTransition = this.getVariant(this.animate)?.transition as TransitionOptions;\n    const globalTransition = this.transition as TransitionOptions;\n    \n    const transitionObj: TransitionOptions = stateTransition || globalTransition || {};\n    \n    // Get stagger value from transition object or fallback to directive input\n    return transitionObj.staggerChildren ?? this.staggerChildren;\n  }\n\n  private getStaggerDirection(): number {\n    // Priority: 1. State-specific transition, 2. Global transition, 3. Input property\n    const stateTransition = this.getVariant(this.animate)?.transition as TransitionOptions;\n    const globalTransition = this.transition as TransitionOptions;\n    \n    const transitionObj: TransitionOptions = stateTransition || globalTransition || {};\n    \n    return transitionObj.staggerDirection ?? this.staggerDirection;\n  }\n\n  private getWhen(): 'beforeChildren' | 'afterChildren' | 'together' {\n    // Priority: 1. State-specific transition, 2. Global transition, 3. Default ('together')\n    const stateTransition = this.getVariant(this.animate)?.transition as TransitionOptions;\n    const globalTransition = this.transition as TransitionOptions;\n    \n    const transitionObj: TransitionOptions = stateTransition || globalTransition || {};\n    \n    return (transitionObj.when ?? 'together') as 'beforeChildren' | 'afterChildren' | 'together';\n  }\n\n  private playAnimation(startState: VariantWithTransition | string, targetState: VariantWithTransition | string) {\n    if (!targetState || !isPlatformBrowser(this.platformId)) return;\n\n    // Resolve variant strings to objects\n    let resolvedStartState: VariantWithTransition = {};\n    let resolvedTargetState: VariantWithTransition = {};\n\n    if (startState === undefined) {\n      resolvedStartState = this.getVariant(this.initial);\n    } else if (typeof startState === 'string' && this.variants?.[startState]) {\n      resolvedStartState = this.variants[startState];\n    } else if (typeof startState === 'object') {\n      resolvedStartState = startState;\n    }\n\n    if (targetState === undefined) {\n      resolvedTargetState = this.getVariant(this.animate);\n    } else if (typeof targetState === 'string' && this.variants?.[targetState]) {\n      resolvedTargetState = this.variants[targetState];\n    } else if (typeof targetState === 'object') {\n      resolvedTargetState = targetState;\n    }\n\n\n    // Check if target state has an 'at' property\n    if (resolvedTargetState.at !== undefined) {\n      // Schedule the animation to start at the specified time\n      setTimeout(() => {\n        this.continueAnimation(resolvedTargetState, false);\n      }, resolvedTargetState.at * 1000); // Convert seconds to milliseconds\n      return;\n    }\n\n    // Continue with normal animation if no 'at' property\n    this.continueAnimation(resolvedTargetState, false);\n  }\n\n  private continueAnimation(resolvedTargetState: VariantWithTransition, isInitialAnimation: boolean) {\n\n    // Timeline takes precedence\n    if (this.timeline && this.timeline.length > 0) {\n      this.runTimeline(resolvedTargetState);\n      return;\n    }\n\n    // Detect per-property transition map on the state\n    const t: any = resolvedTargetState.transition;\n    const isPerPropMap = t && typeof t === 'object' && t.duration === undefined && t.delay === undefined && t.ease === undefined;\n    if (isPerPropMap) {\n      this.runPerPropertyAnimations(resolvedTargetState);\n      return;\n    }\n\n    // Check if this is the initial animation to the animate state\n    if (isInitialAnimation && !this.initialAnimationPlayed) {\n      const staggerValue = this.getStaggerValue();\n\n      if (staggerValue > 0 && this.childMotionDirectives && this.childMotionDirectives.length > 1) {\n        // Stagger will be handled by ngAfterContentInit\n        // Just animate self according to 'when' property\n        const when = this.getWhen();\n\n        if (when !== 'afterChildren') {\n          this.runSelfAnimation();\n        }\n\n        return;\n      }\n    }\n\n\n    // For non-staggered animations or non-initial animations\n    // Get animation options with priority to target state's transition\n    const options = this.getAnimationOptions(resolvedTargetState);\n\n    // Extract only style properties for animation (excluding transition)\n    const targetStyles = this.extractStyleProperties(resolvedTargetState);\n\n    // Create animation with Motion One for the element itself\n    this.controls = this.motionAnimation.animate(\n      this.el.nativeElement as Target,\n      targetStyles,\n      options\n    );\n\n    if (isInitialAnimation) {\n      this.initialAnimationPlayed = true;\n    }\n\n    // Handle regular DOM children (without motionone directives) for non-initial animations\n    if (!isInitialAnimation && this.el.nativeElement.children.length > 0) {\n      // Get children elements\n      const children = Array.from(this.el.nativeElement.children) as HTMLElement[];\n\n      // Animate each child with the same animation\n      children.forEach((child, index) => {\n        // Skip children that have their own motionone directive\n        if (child.hasAttribute('motionone')) {\n          return;\n        }\n\n        // Create child animation\n        const childControl = this.motionAnimation.animate(\n          child,\n          targetStyles,\n          options\n        );\n\n        // Store the control for cleanup\n        this.childrenControls.push(childControl);\n      });\n    } else if (!isInitialAnimation) {\n    }\n\n  }\n\n  private runPerPropertyAnimations(resolvedTargetState: VariantWithTransition) {\n    const baseDelay = this.staggerDelay !== undefined && this.staggerDelay >= 0 ? this.staggerDelay : (((resolvedTargetState.transition as TransitionOptions)?.delay) ?? this.delay);\n    const transitionMap = resolvedTargetState.transition as Record<string, TransitionOptions>;\n    const props = Object.keys(resolvedTargetState).filter(k => k !== 'transition' && k !== 'at');\n\n    let maxEnd = 0;\n    props.forEach((prop) => {\n      const value = (resolvedTargetState as any)[prop];\n      const conf = (transitionMap?.[prop] || {}) as TransitionOptions;\n      const delay = baseDelay + (conf.delay ?? 0);\n      const ease = this.getEasing(conf.ease ?? this.easing);\n      const duration = conf.duration ?? this.duration;\n      const options: any = { duration, delay, easing: ease, repeat: this.getRepeatValue(conf), repeatDelay: conf.repeatDelay };\n      (options as any).ease = ease;\n      const dir = this.mapRepeatTypeToDirection(conf.repeatType);\n      if (dir) options.direction = dir;\n      if (conf.repeatType) options.repeatType = conf.repeatType;\n      const times = (conf as any).times as number[] | undefined;\n      if (times && Array.isArray(times)) options.offset = this.normalizeTimes(times, duration);\n\n      const end = delay + duration;\n      if (end > maxEnd) maxEnd = end;\n\n      let finalValue = value;\n      if (this.isColorProperty(prop)) {\n        if (Array.isArray(value)) finalValue = value.map(v => this.normalizeColor(v));\n        else finalValue = this.normalizeColor(value);\n      }\n      const target = { [prop]: finalValue } as any;\n      const control = this.motionAnimation.animate(this.el.nativeElement as Target, target, options);\n      this.childrenControls.push(control);\n    });\n\n    setTimeout(() => this.animationComplete.emit(), maxEnd * 1000);\n  }\n\n  private runTimeline(resolvedTargetState: VariantWithTransition) {\n    const baseDelay = this.staggerDelay !== undefined && this.staggerDelay >= 0 ? this.staggerDelay : (((resolvedTargetState.transition as TransitionOptions)?.delay) ?? this.delay);\n    let maxEnd = 0;\n    // Also animate any non-timeline props from the target state (e.g., opacity)\n    const timelinePropsSet = new Set((this.timeline || []).map(s => s.prop));\n    const nonTimelineTarget: any = {};\n    Object.keys(resolvedTargetState).forEach(k => {\n      if (k === 'transition' || k === 'at') return;\n      if (!timelinePropsSet.has(k)) nonTimelineTarget[k] = (resolvedTargetState as any)[k];\n    });\n    if (Object.keys(nonTimelineTarget).length > 0) {\n      const opt = this.getAnimationOptions(resolvedTargetState) as any;\n      const ctl = this.motionAnimation.animate(this.el.nativeElement as Target, nonTimelineTarget, opt);\n      this.childrenControls.push(ctl);\n      const nonEnd = (opt.delay ?? 0) + (opt.duration ?? this.duration);\n      if (nonEnd > maxEnd) maxEnd = nonEnd;\n    }\n    this.timeline!.forEach(step => {\n      const start = baseDelay + (step.atTime ?? 0) + (step.delay ?? 0);\n      const duration = step.duration;\n      const value = step.keyframes !== undefined ? step.keyframes : step.to;\n      const easeInput = step.ease ?? this.easing;\n\n      // Build options with repeat and direction\n      // Prefer function easing always in timeline to preserve keyframe interpolation\n      const ease = this.getEasing(easeInput as any);\n      const options: any = { duration, delay: start, easing: ease } as any;\n      (options as any).ease = ease; // Back-compat\n\n      // Apply repeat controls if provided\n      if (step.repeat !== undefined) {\n        options.repeat = step.repeat === true ? Infinity : step.repeat;\n      }\n      if (step.repeatDelay !== undefined) {\n        options.repeatDelay = step.repeatDelay;\n      }\n      const dir = this.mapRepeatTypeToDirection(step.repeatType);\n      if (dir) options.direction = dir;\n      if (step.repeatType) options.repeatType = step.repeatType;\n      if (step.times) options.offset = this.normalizeTimes(step.times, duration);\n\n      const end = start + duration;\n      if (end > maxEnd) maxEnd = end;\n\n      let v = value;\n      if (this.isColorProperty(step.prop)) {\n        if (Array.isArray(v)) v = v.map((c: any) => this.normalizeColor(c));\n        else v = this.normalizeColor(v);\n      }\n      const target = { [step.prop]: v } as any;\n      const control = this.motionAnimation.animate(this.el.nativeElement as Target, target, options);\n      this.childrenControls.push(control);\n    });\n\n    setTimeout(() => this.animationComplete.emit(), maxEnd * 1000);\n  }\n\n  private setupInViewAnimation() {\n    if (isPlatformBrowser(this.platformId)) {\n\n      try {\n        // Use Motion One's inView API - it handles state management automatically\n        if (this.isRunInViewEnabled) {\n\n          // Set up Motion One's inView with automatic state management\n          this.setupMotionOneInView();\n        } else {\n          // For inView and whileInView functionality\n          const hasWhileInView = this.whileInView && Object.keys(this.whileInView).length > 0;\n          const hasInView = this.inView && Object.keys(this.inView).length > 0;\n\n          if (hasWhileInView) {\n            // whileInView needs enter/exit behavior\n            this.setupWhileInViewAnimation();\n          } else if (hasInView) {\n            // inView is a one-time trigger on enter\n            this.inViewInstance = inView(\n              this.el.nativeElement,\n              (info: any) => {\n                this.runInViewAnimation();\n              },\n              {\n                margin: this.offset,\n                amount: 'some'\n              }\n            );\n          }\n        }\n      } catch (error) {\n        console.error('[MotionOne]  Error setting up inView observer:', error);\n      }\n    }\n  }\n\n  runInViewAnimation() {\n    // Handle both inView and whileInView properties\n    if (this.inView && Object.keys(this.inView).length > 0) {\n      this.playAnimation(this.initial, this.inView);\n    } else if (this.whileInView && Object.keys(this.whileInView).length > 0) {\n      this.playAnimation(this.initial, this.whileInView);\n    }\n  }\n\n  // New method to handle whileInView enter behavior (no exit reset)\n  private setupWhileInViewAnimation() {\n    // whileInView should only animate once when entering viewport\n    // It should NOT reset when exiting (that's only for runInView=\"always\")\n    this.inViewInstance = inView(\n      this.el.nativeElement,\n      // Enter callback - when element comes into view\n      (info: any) => {\n        // Element entered viewport - animate to whileInView state\n        // This will only trigger once, and element stays in whileInView state\n        this.playAnimation(this.initial, this.whileInView);\n      },\n      {\n        margin: this.offset,\n        amount: 'some'\n      }\n    );\n\n    // No exit behavior for whileInView - elements should stay in their animated state\n    // Only runInView=\"always\" should reset on exit\n  }\n\n  // New method using Motion One's inView API following Framer Motion pattern\n  private setupMotionOneInView() {\n\n    // Get margin from offset\n    const margin = this.offset || '0px';\n\n    // Determine if this is a parent with stagger children\n    const hasStaggerChildren = this.getStaggerValue() > 0 && this.childMotionDirectives?.length > 1;\n\n    if (hasStaggerChildren && !this.isChild) {\n      // Parent with stagger children - handle stagger animation\n      this.setupStaggerParentInView(margin);\n    } else if (!this.isStaggeredChild) {\n      // Individual element or non-staggered child\n      this.setupIndividualElementInView(margin);\n    } else {\n    }\n  }\n\n  private setupStaggerParentInView(margin: string) {\n    // For parent elements with stagger, use inView with enter/exit callbacks\n    this.inViewInstance = inView(\n      this.el.nativeElement,\n      (info: { isIntersecting: boolean }) => {\n        if (info.isIntersecting) {\n\n          // Stop any existing animations\n          if (this.controls) this.controls.stop();\n\n          // Reset parent to initial\n          const parentInitialStyles = this.extractStyleProperties(this.getVariant(this.initial));\n          if (Object.keys(parentInitialStyles).length > 0) {\n            this.el.nativeElement.style.transition = 'none';\n            Object.assign(this.el.nativeElement.style, parentInitialStyles);\n            this.el.nativeElement.offsetHeight;\n            this.el.nativeElement.style.transition = '';\n          }\n\n          // Get all child elements\n          const childDirectives = this.childMotionDirectives?.filter(child => child !== this) || [];\n\n          if (childDirectives.length > 0) {\n\n            // Stop and reset all children to initial state first\n            childDirectives.forEach(child => {\n              if (child.controls) child.controls.stop();\n\n              const childInitialStyles = child.extractStyleProperties(child.getVariant(child.initial));\n\n              child.el.nativeElement.style.transition = 'none';\n              Object.assign(child.el.nativeElement.style, childInitialStyles);\n              child.el.nativeElement.offsetHeight;\n              child.el.nativeElement.style.transition = '';\n            });\n\n            // Small delay to ensure resets are applied\n            setTimeout(() => {\n              const staggerValue = this.getStaggerValue();\n\n              // Animate children with stagger\n              childDirectives.forEach((child, index) => {\n                const childAnimateStyles = child.extractStyleProperties(child.getVariant(child.animate));\n                const options = child.getAnimationOptions();\n\n                // Override delay with stagger delay\n                const staggerDelay = index * staggerValue;\n                options.delay = staggerDelay;\n\n\n                // Create animation for this child\n                child.controls = animate(child.el.nativeElement, childAnimateStyles, options);\n              });\n\n              // Animate parent if it has its own animation\n              const parentAnimateStyles = this.extractStyleProperties(this.getVariant(this.animate));\n              if (Object.keys(parentAnimateStyles).length > 0) {\n                const parentOptions = this.getAnimationOptions();\n                this.controls = animate(this.el.nativeElement, parentAnimateStyles, parentOptions);\n              }\n            }, 50);\n          }\n        } else if (this.runInViewRepeat === 'always') {\n          // Exit viewport - reset to initial for \"always\" behavior\n\n          // Stop all animations\n          if (this.controls) this.controls.stop();\n\n          // Reset parent to initial\n          const parentInitialStyles = this.extractStyleProperties(this.getVariant(this.initial));\n          if (Object.keys(parentInitialStyles).length > 0) {\n            this.el.nativeElement.style.transition = 'none';\n            Object.assign(this.el.nativeElement.style, parentInitialStyles);\n            this.el.nativeElement.offsetHeight;\n            this.el.nativeElement.style.transition = '';\n          }\n\n          // Reset all children to initial\n          const childDirectives = this.childMotionDirectives?.filter(child => child !== this) || [];\n          childDirectives.forEach(child => {\n            if (child.controls) child.controls.stop();\n\n            const childInitialStyles = child.extractStyleProperties(child.getVariant(child.initial));\n            child.el.nativeElement.style.transition = 'none';\n            Object.assign(child.el.nativeElement.style, childInitialStyles);\n            child.el.nativeElement.offsetHeight;\n            child.el.nativeElement.style.transition = '';\n          });\n\n        }\n      },\n      {\n        margin,\n        amount: 0.1\n      }\n    );\n  }\n\n  private setupIndividualElementInView(margin: string) {\n    // For individual elements, simple initial -> animate transition\n    this.inViewInstance = inView(\n      this.el.nativeElement,\n      (info: { isIntersecting: boolean }) => {\n        if (info.isIntersecting) {\n\n          // Stop any existing animation\n          if (this.controls) this.controls.stop();\n\n          // Reset to initial state first with a small delay to ensure proper reset\n          const initialStyles = this.extractStyleProperties(this.getVariant(this.initial));\n          this.el.nativeElement.style.transition = 'none';\n          Object.assign(this.el.nativeElement.style, initialStyles);\n          this.el.nativeElement.offsetHeight; // Force reflow\n          this.el.nativeElement.style.transition = '';\n\n          // Use a small timeout to ensure the reset is applied before starting animation\n          setTimeout(() => {\n            // Animate from initial to animate state using the directive's playAnimation method\n            this.playAnimation(this.initial, this.animate);\n          }, 50);\n        } else if (this.runInViewRepeat === 'always') {\n          // Exit viewport - reset to initial for \"always\" behavior\n\n          // Stop animation and reset to initial\n          if (this.controls) this.controls.stop();\n\n          const initialStyles = this.extractStyleProperties(this.getVariant(this.initial));\n          this.el.nativeElement.style.transition = 'none';\n          Object.assign(this.el.nativeElement.style, initialStyles);\n          this.el.nativeElement.offsetHeight;\n          this.el.nativeElement.style.transition = '';\n\n        }\n      },\n      {\n        margin,\n        amount: 0.1\n      }\n    );\n  }\n\n  runInitAnimation() {\n    if (!isPlatformBrowser(this.platformId) || !this.initial || !this.animate) return;\n\n\n    // For child elements with stagger, make sure we use the stagger delay\n    if (this.isChild && this.staggerDelay !== undefined && this.staggerDelay >= 0) {\n\n      // Apply start state immediately (unless we're in a reset stagger flow)\n      if (!this._skipStartStylesApplication) {\n        const startStyles = this.extractStyleProperties(this.getVariant(this.initial));\n\n        // Force reset without transition\n        const element = this.el.nativeElement;\n        element.style.transition = 'none';\n        Object.assign(element.style, startStyles);\n      } else {\n        // Clear the flag after use\n        this._skipStartStylesApplication = false;\n      }\n      this.el.nativeElement.offsetHeight; // Force reflow\n\n      // Get animation options with stagger delay\n      const options = this.getAnimationOptions();\n\n      // VARIANT CONTROL: Use variants to ensure correct animation direction\n\n      // Force use the child's specific animate variant (not parent's)\n      const childAnimateVariant = this.getVariant(this.animate || {});\n\n      // Ensure we're animating from initial  animate (not the reverse)\n      const targetStyles = this.extractStyleProperties(childAnimateVariant);\n\n      // Double-check: log what the current element state is\n      const currentStyles = window.getComputedStyle(this.el.nativeElement);\n\n      // Use playAnimation to ensure proper initialanimate direction\n      setTimeout(() => {\n        this.el.nativeElement.style.transition = '';\n\n        // CRITICAL: Use playAnimation with variants to force correct direction\n        this.playAnimation(this.initial, this.animate);\n      }, 5);\n\n      this.initialAnimationPlayed = true;\n    } else {\n      // Normal animation without stagger\n      this.playAnimation(this.initial, this.animate);\n    }\n  }\n\n\n  runExitAnimation(): Promise<void> {\n    \n    if (!isPlatformBrowser(this.platformId)) {\n      return Promise.resolve();\n    }\n    \n    // If no exit animation defined, resolve immediately\n    if (!this.exit || Object.keys(this.exit).length === 0) {\n     // console.log(`[${this.elementId}] No exit animation defined, resolving immediately`);\n      return Promise.resolve();\n    }\n    \n    \n    // Use exit-specific transition if available, otherwise use global transition\n    const exitTransition = (this.getVariant(this.exit).transition as TransitionOptions) || (this.transition as TransitionOptions) || {} as TransitionOptions;\n    \n    // Create a promise that resolves when the exit animation completes\n    return new Promise<void>((resolve) => {\n      const exitOptions: any = {\n        duration: (exitTransition.duration ?? this.duration) as number,\n        delay: (exitTransition.delay ?? this.exitDelay) as number,\n        onComplete: () => {\n     //     console.log(`[${this.elementId}] Exit animation completed`);\n          this.animationComplete.emit();\n          resolve();\n        }\n      };\n      const ease = this.getEasing(exitTransition.ease ?? this.easing);\n      exitOptions.easing = ease;\n      (exitOptions as any).ease = ease;\n      \n      // Stop any existing animation\n      if (this.controls) {\n        this.controls.stop();\n      }\n      \n      // Stop any existing children animations\n      this.childrenControls.forEach(control => {\n        if (control) control.stop();\n      });\n      \n      // Extract only style properties for animation (excluding transition)\n      const exitStyles = this.extractStyleProperties(this.getVariant(this.exit));\n      \n  //    console.log(`[${this.elementId}] Starting exit animation with styles:`, exitStyles);\n      \n      // Create exit animation\n     // console.log('animatiing exit')\n\n      this.controls = this.motionAnimation.animate(\n        this.el.nativeElement as Target,\n        exitStyles,\n        exitOptions\n      );\n      \n      // If no duration is set, resolve immediately\n      if (!exitOptions.duration) {\n       // console.log(`[${this.elementId}] No duration set, resolving immediately`);\n        resolve();\n      }\n    });\n  }\n\n  cancel() {\n    if (this.controls) {\n      this.controls.stop();\n    }\n    \n    // Cancel any children animations\n    this.childrenControls.forEach(control => {\n      if (control) control.stop();\n    });\n    \n    this.applyAnimateStyles();\n  }\n\n  getDuration(): number {\n    if (!isPlatformBrowser(this.platformId)) return 0;\n    \n    try {\n      // Consider state-specific transition if available\n      // Check transitions in order of priority: exit, animate, then default transition\n      const animateTransition = (this.getVariant(this.exit)?.transition as TransitionOptions) || (this.transition as TransitionOptions) || {} as TransitionOptions;\n      const duration = (animateTransition.duration ?? this.duration) as number;\n      const delay = (animateTransition.delay ?? this.delay) as number;\n      return (Number(duration) + Number(delay)) * 1000;\n    } catch (error) {\n      console.error('Error calculating duration:', error);\n      return 0;\n    }\n  }\n\n  getKeyByValue(object: any, key: any) {\n    return Object.keys(object).find((k) => object[k] === key);\n  }\n\n  // Helper method for consistent logging\n  private logDebug(message: string) {\n    // Log to console\n    //console.log(`[${this.elementId}] ${message}`);\n    \n    // Only add DOM elements in browser environment\n    if (isPlatformBrowser(this.platformId)) {\n      // Add a visible element to the DOM for debugging (if needed)\n      // Uncomment this section if you need visual debugging\n      /*\n      const debugEl = document.createElement('div');\n      debugEl.style.position = 'fixed';\n      debugEl.style.top = '10px';\n      debugEl.style.right = '10px';\n      debugEl.style.backgroundColor = 'rgba(0,0,0,0.8)';\n      debugEl.style.color = 'white';\n      debugEl.style.padding = '5px';\n      debugEl.style.zIndex = '9999';\n      debugEl.style.maxWidth = '80%';\n      debugEl.style.maxHeight = '80%';\n      debugEl.style.overflow = 'auto';\n      debugEl.textContent = `[${this.elementId}] ${message}`;\n      document.body.appendChild(debugEl);\n      \n      // Remove after 5 seconds\n      setTimeout(() => {\n        document.body.removeChild(debugEl);\n      }, 5000);\n      */\n    }\n  }\n\n  // Helper to normalize color values to a consistent format\n  private normalizeColor(color: any): string {\n    if (color == null) return '';\n    if (typeof color !== 'string') {\n      try { return String(color); } catch { return ''; }\n    }\n    if (color.startsWith('rgb') || color.startsWith('#')) return color;\n    if (color === 'aqua') return '#00ffff';\n    if (color === 'red') return '#ff0000';\n    if (color === 'blue') return '#0000ff';\n    if (color === 'green') return '#008000';\n    if (color === 'yellow') return '#ffff00';\n    if (color === 'purple') return '#800080';\n    if (color === 'orange') return '#ffa500';\n    if (color === 'black') return '#000000';\n    if (color === 'white') return '#ffffff';\n    return color;\n  }\n\n  private normalizeTimes(times: number[] | undefined, duration: number): number[] | undefined {\n    if (!times || times.length === 0) return undefined;\n    const hasValuesAboveOne = times.some(t => t > 1);\n    if (!hasValuesAboveOne) return times;\n    const maxT = Math.max(...times);\n    const safeDuration = Math.max(duration, 0.000001);\n    const divisor = maxT > safeDuration * 1.001 ? maxT : safeDuration;\n    return times.map(t => {\n      const v = t / divisor;\n      return v < 0 ? 0 : v > 1 ? 1 : v;\n    });\n  }\n\n  // Add a method to manually trigger exit animation from outside\n  public triggerExitAnimation(): Promise<void> {\n   // console.log(`[${this.elementId}] Manually triggering exit animation`);\n    return this.runExitAnimation();\n  }\n\n  // Add a listener for the custom exit event\n  @HostListener('motionExit')\n  onMotionExit() {\n  //  console.log(`[${this.elementId}] Received motionExit event`);\n    this.runExitAnimation();\n  }\n\n  public getVariant(variant: VariantWithTransition | string): VariantWithTransition {\n    if (typeof variant === 'string') {\n      return this.variants[variant] || {};\n    } else if (typeof variant === 'object') {\n      return variant;\n    } else {\n      throw new Error('Invalid variant format');\n    }\n  }\n}\n","import { Directive, Input, TemplateRef, ViewContainerRef, OnDestroy } from '@angular/core';\nimport { MotionOneDirective } from './motion-one.directive';\n\n@Directive({\n  selector: '[motionIf]',\n  standalone: true\n})\nexport class MotionIfDirective implements OnDestroy {\n  private hasView = false;\n  private motionElement: MotionOneDirective | null = null;\n  private exitTimeout: any;\n\n  constructor(\n    private templateRef: TemplateRef<any>,\n    private viewContainer: ViewContainerRef\n  ) {}\n\n  @Input() set motionIf(condition: boolean) {\n    // When condition becomes true and view doesn't exist\n    if (condition && !this.hasView) {\n      // Create the view\n      const view = this.viewContainer.createEmbeddedView(this.templateRef);\n      this.hasView = true;\n      \n      // Find the motion directive in the created view\n      setTimeout(() => {\n        const element = view.rootNodes[0];\n        if (element) {\n          this.motionElement = (element as any)._motionDirective || null;\n        }\n      });\n    } \n    // When condition becomes false and view exists\n    else if (!condition && this.hasView) {\n      // If we have a motion element with exit animation\n      if (this.motionElement && this.motionElement.exit && \n          Object.keys(this.motionElement.exit).length > 0) {\n        \n        // Run exit animation\n        this.motionElement.runExitAnimation();\n        \n        // Clear any existing timeout\n        if (this.exitTimeout) {\n          clearTimeout(this.exitTimeout);\n        }\n        \n        // Get duration from the motion element\n        const duration = this.motionElement.getDuration() || 1000;\n        \n        // Remove the view after animation completes\n        this.exitTimeout = setTimeout(() => {\n          if (this.hasView) {\n            this.viewContainer.clear();\n            this.hasView = false;\n            this.motionElement = null;\n          }\n        }, duration);\n      } else {\n        // No exit animation, remove immediately\n        this.viewContainer.clear();\n        this.hasView = false;\n        this.motionElement = null;\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.exitTimeout) {\n      clearTimeout(this.exitTimeout);\n    }\n  }\n} ","/*\n * Public API Surface of ngx-motion\n */\n\n// Motion One specific exports\nexport * from './lib/directives/motion-one.directive';\nexport * from './lib/directives/motion-if.directive';\nexport * from './lib/services/motion-one.service';\nexport * from './lib/services/motion-animation.service';\n\n// Export interfaces and types\nexport type {\n  TransitionOptions,\n  VariantWithTransition,\n  TimelineStep\n} from './lib/directives/motion-one.directive';\n\nexport type {\n  MotionElement\n} from './lib/services/motion-one.service';","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}